{"version":3,"sources":["webpack:///./src/pages/shopcar.vue?3a01","webpack:///./src/pages/shopcar.vue?cd84","webpack:///src/pages/shopcar.vue","webpack:///./src/pages/shopcar.vue?e59e","webpack:///./src/pages/shopcar.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","$store","state","user","data","item","key","_id","directives","name","rawName","value","expression","attrs","domProps","Array","isArray","check","_i","on","$event","$$a","$$el","target","$$c","checked","$$v","$$i","$set","concat","slice","server","baseUrl","detail","detailbanner","pic","_v","_s","title","_f","price","CHANGE_ITEM","count","REMOVE_ITEM","goods","length","checkcpt","CHECK_ITEM","CLEAR_BUYCAR","totals","staticRenderFns","good","computed","store","get","methods","watch","handler","window","localStorage","setItem","deep","component"],"mappings":"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","file":"js/chunk-7feccd75.7289767b.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopcar.vue?vue&type=style&index=0&id=07abc781&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopcar.vue?vue&type=style&index=0&id=07abc781&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shopcar\"},[_c('ul',_vm._l((_vm.$store.state.user.data.goods),function(item){return _c('li',{key:item._id},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.check),expression:\"item.check\"}],attrs:{\"type\":\"checkbox\",\"id\":\"checkbox\"},domProps:{\"checked\":Array.isArray(item.check)?_vm._i(item.check,null)>-1:(item.check)},on:{\"change\":function($event){var $$a=item.check,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(item, \"check\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(item, \"check\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(item, \"check\", $$c)}}}}),_c('img',{attrs:{\"src\":_vm.server.baseUrl+item.detail.detailbanner[0].pic}}),_c('div',{staticClass:\"change_box\"},[_c('p',{staticClass:\"title\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"change\"},[_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(_vm._f(\"fillzero\")(item.price)))]),_c('span',{staticClass:\"countbtn\"},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.CHANGE_ITEM({_id:item._id,count:-1})}}},[_vm._v(\"-\")]),_c('i',[_vm._v(_vm._s(item.count))]),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.CHANGE_ITEM({_id:item._id,count:1})}}},[_vm._v(\"+\")])])])]),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.REMOVE_ITEM({_id:item._id})}}},[_vm._v(\"删除\")])])}),0),_c('div',{staticClass:\"jiesuanfoot\"}),_c('div',{staticClass:\"jiesuanbox\"},[_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$store.state.user.data.goods && _vm.$store.state.user.data.goods.length>0),expression:\"$store.state.user.data.goods && $store.state.user.data.goods.length>0\"}],staticClass:\"jiesuan\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.checkcpt),expression:\"checkcpt\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.checkcpt)?_vm._i(_vm.checkcpt,null)>-1:(_vm.checkcpt)},on:{\"click\":function($event){return _vm.CHECK_ITEM(_vm.checkcpt)},\"change\":function($event){var $$a=_vm.checkcpt,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.checkcpt=$$a.concat([$$v]))}else{$$i>-1&&(_vm.checkcpt=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.checkcpt=$$c}}}}),_vm._v(\"全选\")]),_c('button',{on:{\"click\":function($event){return _vm.CLEAR_BUYCAR()}}},[_vm._v(\"全部删除\")]),_c('span',[_vm._v(\"总计:\"+_vm._s(_vm._f(\"fillzero\")(_vm.totals)))]),_c('a',{attrs:{\"href\":\"javascript:;\"}},[_vm._v(\"结算\")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class='shopcar'>\n    <ul>\n      <li \n      v-for='item of $store.state.user.data.goods'\n      :key='item._id'\n      >\n        <input type=\"checkbox\" id='checkbox' v-model=\"item.check\"/>\n        <img :src='server.baseUrl+item.detail.detailbanner[0].pic'/>\n        <div class=\"change_box\">\n          <p class=\"title\">{{item.title}}</p>\n          <div class=\"change\">\n            <span class=\"price\">{{item.price|fillzero}}</span>\n            <span class=\"countbtn\">\n              <a href=\"javascript:;\" @click='CHANGE_ITEM({_id:item._id,count:-1})'>-</a>\n              <i>{{item.count}}</i>\n              <a href=\"javascript:;\"  @click='CHANGE_ITEM({_id:item._id,count:1})'>+</a>\n            </span>\n          </div>\n        </div>\n        <a href=\"javascript:;\" @click='REMOVE_ITEM({_id:item._id})'>删除</a>\n      </li>\n    </ul>\n    <div class=\"jiesuanfoot\"></div>\n    <div class=\"jiesuanbox\">\n      <p v-show=\"$store.state.user.data.goods && $store.state.user.data.goods.length>0\" class=\"jiesuan\">\n        <label><input type=\"checkbox\" v-model=\"checkcpt\" @click='CHECK_ITEM(checkcpt)'/>全选</label>\n        <button @click='CLEAR_BUYCAR()'>全部删除</button>\n        <span>总计:{{totals|fillzero}}</span>\n        <a href=\"javascript:;\">结算</a>\n      </p>\n    </div>\n    \n  </div>\n\n</template>\n\n<script>\nimport { mapActions,mapGetters } from \"vuex\";\nimport store from '../plugins/store'\nexport default {\n   beforeRouteEnter(to,from,next){//这里拿不到this\n        //直接去store里拿数据进行判断，这里的数据登录的时候会被修改\n        store.state.user.err==0?next():next('/login')\n        // console.log(store.state.user)\n    \n        // axios({\n        //     url:'http://localhost:3000/api/user',\n        // }).then(\n        //     res=>{\n        //         // console.log(res.data)\n        //         res.data.err==0?next(_this=>_this.userdata=res.data.data):next('/login')\n        //     }\n        // )\n    },\n  data(){\n    return {\n      good:store.state.user,\n    }\n  },\n  computed:{\n    // ...mapGetters(['goods']),\n    totals:(state)=>{\n      let sum = 0;\n      if(store.state.user.data.goods){\n        store.state.user.data.goods.forEach((item,index) => {\n        if(item.check==true){\n          sum += item.price*item.count\n        }\n      });\n    }\n    return sum;\n    },\n    checkcpt:{\n      get:function (state) {\n       let checkallcpt=false\n      let sum=0\n      if(store.state.user.data.goods){\n        let a=store.state.user.data.goods.length\n        store.state.user.data.goods.forEach((item,index) => {\n          if(item.check==true){\n            sum+=1\n          }          \n      });\n        if(sum==a){\n          checkallcpt=true\n        }else{\n          checkallcpt=false\n        }\n      }\n      return checkallcpt\n    },\n　   // setter\n    set:function () {}\n    }\n  },\n  methods:{\n    ...mapActions(['CHANGE_ITEM','REMOVE_ITEM','CHECK_ITEM','CLEAR_BUYCAR']),\n\n  },\n  watch:{\n    //检测goods发生变化，就更新localstorage中的内容\n    good:{\n      handler(current,prev){\n        // console.log(current)\n        let userdata=current;\n        window.localStorage.setItem('user',JSON.stringify(userdata))\n      },\n      // immediate:true,\n      deep:true\n    },\n  }\n}\n</script>\n\n<style scoped>\n .shopcar{background: #fff;}\n .shopcar ul li{display: flex;justify-content:space-around;align-items: center;font:.26rem/.4rem \"\";margin:.2rem .1rem;background: #f9f9f9;}\n .shopcar ul li input{width:.3rem;height:.3rem}\n .shopcar ul li img{width:2rem;height:2rem;margin:0.2rem 0.1rem;}\n .shopcar ul li .change_box{width:3rem;}\n .shopcar ul li .change_box .title{width:3rem;white-space:wrap;}\n .shopcar ul li .change_box .change{display: flex;justify-content:space-between;margin-top:.3rem}\n  .shopcar ul li .change_box .change .price{color:#f00;text-align: center;font:.3rem/.5rem \"\"}\n  .shopcar ul li .change_box .change .countbtn{display: flex;justify-content:space-between;}\n  .shopcar ul li .change_box .change .countbtn a{display:block;background:#cecece;width:0.5rem;height:0.5rem;font:0.3rem/0.5rem \"宋体\";text-align: center;}\n  .shopcar ul li .change_box .change .countbtn i{display:block;background:#cecece;width:0.5rem;height:0.5rem;font:0.3rem/0.5rem \"宋体\";text-align: center;margin:0 0.05rem}\n  .jiesuanbox{position: fixed;bottom:.96rem;width:100%;background: #fff;}\n  .jiesuan{display: flex;justify-content:space-between;align-items: center;font:.3rem/.5rem \"\";}\n  .jiesuan input{width:.3rem;height:.3rem;margin-left:.2rem;}\n  .jiesuan button{border:none;background: #f9f9f9}\n  .jiesuan span{display:block;width:2rem;}\n  .jiesuan a{display:block;width:2rem;height:.8rem;font:.3rem/.8rem \"\";background:#f20;color:#fff;text-align: center}\n  .jiesuanfoot{height:.8rem;}\n</style>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<!-- \n<template>\n  <div class='shopcar'>\n    <ul>\n      <li \n      v-for='item of $store.state.user.data.goods'\n      :key='item._id'\n      >\n        <input type=\"checkbox\" id='checkbox' v-model=\"item.check\"/>\n        \n        <img src=\"a.img\"/>\n        <div>\n          <p>title</p>\n          <span>{{item.price}}</span>\n          <a href=\"javascript:;\" @click='CHANGE_ITEM({_id:item._id,count:-1})'>-</a>\n          <i>{{item.count}}</i>\n          <a href=\"javascript:;\"  @click='CHANGE_ITEM({_id:item._id,count:1})'>+</a>\n        </div>\n        <a href=\"javascript:;\" @click='REMOVE_ITEM({_id:item._id})' >删除</a>\n      </li>\n    </ul>\n    <button @click='CLEAR_BUYCAR()' v-show=\"$store.state.user.data.goods && $store.state.user.data.goods.length>0\">全部删除</button>\n    <span v-show=\"$store.state.user.data.goods && $store.state.user.data.goods.length>0\">{{totals}}</span>\n  </div>\n</template>\n<style scoped>\n .shopcar{font:.38rem/.4rem \"\";}\n</style> -->\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopcar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./shopcar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./shopcar.vue?vue&type=template&id=07abc781&scoped=true&\"\nimport script from \"./shopcar.vue?vue&type=script&lang=js&\"\nexport * from \"./shopcar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shopcar.vue?vue&type=style&index=0&id=07abc781&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07abc781\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}